<html>
    <head>
        <title>Login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.png"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/linearicons-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->

	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
        <style>
            body {
            margin: 0;
            padding: 0;
            background-color: #17a2b8;
            height: 100vh;
            }
            #login .container #login-row #login-column #login-box {
            margin-top: 120px;
            max-width: 600px;
            height: 320px;
            border: 1px solid #9C9C9C;
            background-color: #EAEAEA;
            }
            #login .container #login-row #login-column #login-box #login-form {
            padding: 20px;
            }
            #login .container #login-row #login-column #login-box #login-form #register-link {
            margin-top: -85px;
            }
        </style>

        </head>
        
       
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
        
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <!------ Include the above in your HEAD tag ---------->
        <!-- Header -->
		<header class="header-v4">
            <!-- Header desktop -->
            <div class="container-menu-desktop">
                <!-- Topbar -->
                <div class="top-bar">
                    <div class="content-topbar flex-sb-m h-full container">

                    </div>
                </div>
    
                <div class="wrap-menu-desktop how-shadow1">
                    <nav class="limiter-menu-desktop container">
                        
                        <!-- Logo desktop -->		
                        <a href="index.html" class="logo">
                            <img src="images/TutorLab_Logo.png" alt="IMG-LOGO">
                        </a>
    
                        <!-- Menu desktop -->
                        <div class="menu-desktop">
                            <ul class="main-menu">
                                <li>
                                    <a href="index.html">Home</a>
                                </li>
    
    
                                <li class="label1" data-label1="hot">
                                    <a href="alltutor.html">Tutor</a>
                                </li>
    
                                <li>
                                    <a href="appointment.html">Appointment</a>
                                </li>
    
                            </ul>
                        </div>	
    
  
                    </nav>
                </div>	
            </div>
    
            <!-- Header Mobile -->
            <div class="wrap-header-mobile">
            
                <!-- Logo moblie -->		
                <div class="logo-mobile">
                    <a href="index.html"><img src="images/TutorLab_Logo.png" alt="IMG-LOGO"></a>
                </div>
  
    
                <!-- Button show menu -->
                <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
                    <span class="hamburger-box">
                        <span class="hamburger-inner"></span>
                    </span>
                </div>
            </div>
    
    
            <!-- Menu Mobile -->
            <div class="menu-mobile">
                <ul class="topbar-mobile">
    
                    <li>
                        <div class="right-top-bar flex-w h-full">
                                <a href="#" id="setCID" class="flex-c-m trans-04 p-lr-25" onclick="SetID()">
                             Login with Customer ID
                          </a>
    
                            <a href="#" class="flex-c-m trans-04 p-lr-25">
                                EN
                            </a>
    
                            <a href="#" class="flex-c-m trans-04 p-lr-25">
                                SGD
                            </a>
                        </div>
                    </li>
                </ul>
    
                <ul class="main-menu-m">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
    
    
                    <li class="label1" data-label1="hot">
                        <a href="alltutor.html">Tutor</a>
                    </li>
    
                    <li>
                        <a href="appointment.html">Appointment</a>
                    </li>
                    
                </ul>
            </div>
    
            <!-- Modal Search -->
            <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
                <div class="container-search-header">
                    <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
                        <img src="images/icons/icon-close2.png" alt="CLOSE">
                    </button>
    
                </div>
            </div>
        </header>
    
    
        <body>
            <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
            <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
            <!------ Include the above in your HEAD tag ---------->
            
            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
            
            
            <div class="container">

            
            
            
            
            
            <div class="card bg-light">
            <article class="card-body mx-auto" style="max-width: 400px;">
                <h4 class="card-title mt-3 text-center">Create Account</h4>
                <p class="text-center">Get started with your free account</p>
                <form action="" method="POST" id="addCustomer">
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                    </div>
                    <input name="customerID" id="customerID" class="form-control" placeholder="Customer ID" type="text">
                </div> <!-- form-group// customerid -->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                     </div>
                    <input name="name" id="name" class="form-control" placeholder="Full name" type="text">
                </div> <!-- form-group// name -->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                     </div>
                    <input name="username" id="username" class="form-control" placeholder="Username" type="text">
                </div> <!-- form-group// username-->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                    </div>
                    <input name="password" id="password" class="form-control" placeholder="Create password" type="password">
                </div> <!-- form-group// password-->
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                    </div>
                    <input class="form-control" placeholder="Repeat password" type="password">
                </div> <!-- form-group// password--> 
                <div class="form-group input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
                     </div>
                    <input name="customer_email" id="customer_email" class="form-control" placeholder="Email address" type="email">
                </div> <!-- form-group// email -->

                                     
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block"> Create Account  </button>
                </div> <!-- form-group// -->      
                <p class="text-center">Have an account? <a href="login.html">Log In</a> </p>                                                                 
            </form>
            </article>
            </div> <!-- card.// -->
            
            </div> 
            <!--container end.//-->

            

            <script>
                // Helper function to display error message

            
                // anonymous async function 
                // - using await requires the function that calls it to be async
                //////
                $("#addCustomer").submit(async (event) => {  //Prevents screen from refreshing when submitting  
                    event.preventDefault();
                    var username = $('#username').val();
                    var password = $('#password').val();
                    var name = $('#name').val();
                    var customer_email = $('#customer_email').val();
                    var customerID = $('#customerID').val();
                   
                    var serviceURL = "http://127.0.0.1:5004/account";

                    try {
                        var customer_email = $('#customer_email').val();
                        var username = $('#username').val().toString();;
                        var password = $('#password').val();
                        var name = $('#name').val();
                        var customerID = $('#customerID').val();
                        console.log(username);
                        const response =
                        await fetch(
                            serviceURL,
                            {
                                method: 'POST',
                                headers:{"Content-Type":"application/json"},
                                body: JSON.stringify
                                ({customerID: customerID, username: $('#username').val().toString(), name: $('#name').val().toString(), password: $('#password').val().toString(), customer_email: $('#customer_email').val().toString() })
                            }
                        );

                        const data = await response.json();
                        alert("You have successfully created your account! Please Login!");
                        window.location.replace("login.html"); 
                        //console.log(data);

                        //******************** check if reposnse is present**************
                        // if(response.ok){
                        //     window.location.replace(homeURL);
                        //      return False;
                        // }
                        // else{
                        //     showError(data.message)
                        // }
                        
                        var books = data.books; //the arr is in data.books of the JSON data
                        
                        console.log(books);
                        showError('Book successfully added.')
                        
                    } catch (error) {
                        // Errors when calling the service; such as network error, 
                        // service offline, etc
                        // showError
                        // ('There is a problem retrieving books data, please try again later.<br />'+error);
           
        } // error

                });

                ///////
                $(async() => {           
                    // Change serviceURL to your own
                    
                    
                    var serviceURL = "http://127.0.0.1:5000/book/"+isbnNumber, methods=['POST'];
            
                    
    });
</script>

            
        </body>


</html>

